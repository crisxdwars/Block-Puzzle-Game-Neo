@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap');

:root {
  --bg-deep:#0a0a1a;
  --bg-board:#0f0f2a;
  --neon-cyan:#00f0ff;
  --neon-pink:#ff2d95;
  --neon-green:#39ff14;
  --neon-yellow:#ffe600;
  --neon-orange:#ff6a00;
  --neon-purple:#bf00ff;
  --neon-red:#ff0040;
  --neon-blue:#0080ff;
  --text-dim:#4a4a7a;
  --easy-color:#39ff14;
  --med-color:#ffe600;
  --hard-color:#ff2d95;
}

*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;min-height:100vh;overflow-x:hidden}
body{background:var(--bg-deep);font-family:'Share Tech Mono',monospace;color:#ccc;user-select:none}

.grid-bg{
  position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    linear-gradient(rgba(100,100,200,0.04) 1px,transparent 1px),
    linear-gradient(90deg,rgba(100,100,200,0.04) 1px,transparent 1px);
  background-size:40px 40px;
}

.screen{
  position:fixed;inset:0;z-index:1;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  transition:opacity .35s,transform .35s;
  opacity:0;pointer-events:none;transform:scale(.96)
}
.screen.active{opacity:1;pointer-events:auto;transform:scale(1)}

#game-screen{overflow:hidden}
.game-wrapper{
  position:relative;z-index:2;display:flex;flex-direction:column;
  align-items:center;gap:10px
}

.game-title{
  font-family:"Press Start 2P", system-ui;font-size:1.5rem;font-weight:900;
  letter-spacing:5px;color:var(--neon-cyan);
  text-shadow:0 0 10px var(--neon-cyan),0 0 40px rgba(0,240,255,.3);
}
.game-title span{
  color:var(--neon-pink);
  text-shadow:0 0 10px var(--neon-pink),0 0 40px rgba(255,45,149,.3)
}

.game-row{display:flex;gap:18px;align-items:flex-start}

.panel{
  background:rgba(15,15,42,.85);border:1px solid rgba(0,240,255,.15);
  border-radius:10px;padding:12px 14px;width:130px;
  box-shadow:0 0 20px rgba(0,240,255,.05),inset 0 1px 0 rgba(255,255,255,.04);
}
.panel-title{
  font-family:'Orbitron',sans-serif;font-size:.55rem;letter-spacing:3px;
  color:var(--neon-cyan);text-transform:uppercase;margin-bottom:6px;
  padding-bottom:5px;border-bottom:1px solid rgba(0,240,255,.12);
}
.panel-value{
  font-family:'Orbitron',sans-serif;font-size:1.5rem;font-weight:700;
  color:#fff;text-shadow:0 0 8px rgba(0,240,255,.4)
}
.panel-sub{font-size:.6rem;color:var(--text-dim);margin-top:2px}

#next-board{
  display:grid;grid-template-columns:repeat(4,20px);
  grid-template-rows:repeat(4,20px);gap:2px;margin-top:4px
}
.next-cell{background:rgba(30,30,60,.6);border-radius:3px}
.next-cell.filled{border-radius:4px}

.diff-badge{
  display:inline-block;font-family:'Orbitron',sans-serif;
  font-size:.6rem;font-weight:700;letter-spacing:2px;
  padding:3px 9px;border-radius:18px;margin-top:5px;
  text-transform:uppercase;background:rgba(57,255,20,.12);
  color:var(--easy-color);border:1px solid var(--easy-color);
  box-shadow:0 0 8px rgba(57,255,20,.2);transition:all .4s;
}
.diff-badge.medium{
  background:rgba(255,230,0,.12);color:var(--med-color);
  border-color:var(--med-color);box-shadow:0 0 8px rgba(255,230,0,.2)
}
.diff-badge.hard{
  background:rgba(255,45,149,.12);color:var(--hard-color);
  border-color:var(--hard-color);box-shadow:0 0 8px rgba(255,45,149,.3);
  animation:hardPulse 1.2s infinite alternate
}
@keyframes hardPulse{
  from{box-shadow:0 0 8px rgba(255,45,149,.3)}
  to{box-shadow:0 0 22px rgba(255,45,149,.6)}
}

.board-wrap{
  position:relative;border:1px solid rgba(0,240,255,.25);
  border-radius:8px;overflow:hidden;
  box-shadow:0 0 30px rgba(0,240,255,.08),inset 0 0 60px rgba(0,0,0,.6)
}
#game-board{
  display:grid;grid-template-columns:repeat(10,28px);
  grid-template-rows:repeat(20,28px);gap:1px;
  background:var(--bg-board);padding:1px
}
.cell{
  background:rgba(20,20,50,.7);border-radius:2px;
  transition:background .05s
}
.cell.filled{border-radius:3px}

.controls-panel{text-align:center}
.controls-panel .panel-title{text-align:center}
.ctrl-row{
  display:flex;justify-content:space-between;align-items:center;
  font-size:.55rem;color:var(--text-dim);padding:2px 0
}
.ctrl-key{
  background:rgba(0,240,255,.08);border:1px solid rgba(0,240,255,.2);
  border-radius:4px;padding:2px 5px;color:var(--neon-cyan);font-size:.55rem
}

.overlay{
  position:absolute;inset:0;background:rgba(10,10,26,.92);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  z-index:10;border-radius:8px;backdrop-filter:blur(4px);
  transition:opacity .3s;
}
.overlay.hidden{opacity:0;pointer-events:none}

/* Loading Overlay */
.loading-overlay{
  position:fixed;inset:0;background:var(--bg-deep);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  z-index:100;transition:opacity .3s;
}
.loading-overlay.hidden{opacity:0;pointer-events:none}
.loading-spinner{
  width:50px;height:50px;border:3px solid rgba(0,240,255,.2);
  border-top-color:var(--neon-cyan);border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{
  margin-top:15px;font-family:'Orbitron',sans-serif;font-size:.75rem;
  color:var(--neon-cyan);letter-spacing:2px;
}
.overlay h2{
  font-family:'Orbitron',sans-serif;font-size:1.1rem;font-weight:900;
  color:var(--neon-cyan);text-shadow:0 0 12px var(--neon-cyan);
  margin-bottom:6px;letter-spacing:3px
}
.overlay h2.gameover{
  color:var(--neon-pink);text-shadow:0 0 16px var(--neon-pink)
}
.overlay p{
  font-size:.65rem;color:var(--text-dim);margin-bottom:10px;
  text-align:center;line-height:1.6
}
.btn-start{
  font-family:'Orbitron',sans-serif;font-size:.65rem;font-weight:700;
  letter-spacing:3px;background:transparent;border:1px solid var(--neon-cyan);
  color:var(--neon-cyan);padding:8px 24px;border-radius:30px;cursor:pointer;
  text-transform:uppercase;transition:all .3s;
  box-shadow:0 0 12px rgba(0,240,255,.2);
}
.btn-start:hover{
  background:var(--neon-cyan);color:#0a0a1a;
  box-shadow:0 0 24px rgba(0,240,255,.5)
}

.btn-home{
  font-family:'Orbitron',sans-serif;font-size:.52rem;font-weight:700;
  letter-spacing:2px;background:transparent;
  border:1px solid rgba(100,100,180,.25);color:var(--text-dim);
  padding:5px 14px;border-radius:20px;cursor:pointer;
  text-transform:uppercase;transition:all .25s;
}
.btn-home:hover{border-color:var(--neon-cyan);color:var(--neon-cyan)}

.quiz-overlay{
  position:fixed;inset:0;background:rgba(5,5,15,.88);
  display:flex;align-items:center;justify-content:center;
  z-index:100;backdrop-filter:blur(6px);transition:opacity .25s;
}
.quiz-overlay.hidden{opacity:0;pointer-events:none}
.quiz-modal{
  background:#111128;border:1px solid rgba(0,240,255,.3);
  border-radius:14px;padding:26px 28px 22px;width:420px;max-width:92vw;
  box-shadow:0 0 40px rgba(0,240,255,.12),0 8px 40px rgba(0,0,0,.5);
  animation:modalIn .22s cubic-bezier(.18,.89,.32,1.28);
}
@keyframes modalIn{
  from{transform:scale(.88) translateY(20px);opacity:0}
  to{transform:scale(1) translateY(0);opacity:1}
}
.quiz-header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:14px
}
.quiz-diff-badge{margin:0;font-size:.55rem}
.timer-ring{position:relative;width:40px;height:40px}
.timer-ring svg{transform:rotate(-90deg)}
.timer-ring-bg{
  fill:none;stroke:rgba(100,100,180,.15);stroke-width:3
}
.timer-ring-fg{
  fill:none;stroke:var(--neon-cyan);stroke-width:3;stroke-linecap:round;
  transition:stroke-dashoffset .25s linear,stroke .4s
}
.timer-ring-fg.warning{stroke:var(--neon-yellow)}
.timer-ring-fg.danger{stroke:var(--neon-pink)}
.timer-ring-text{
  position:absolute;inset:0;display:flex;align-items:center;
  justify-content:center;font-family:'Orbitron',sans-serif;
  font-size:.6rem;font-weight:700;color:#fff
}
.quiz-question{
  font-size:.78rem;color:#ddd;line-height:1.6;margin-bottom:16px;
  padding-bottom:12px;border-bottom:1px solid rgba(100,100,180,.12)
}
.quiz-options{display:flex;flex-direction:column;gap:7px}
.quiz-option{
  background:rgba(30,30,60,.6);border:1px solid rgba(100,100,180,.2);
  border-radius:8px;padding:9px 13px;color:#bbb;font-size:.72rem;
  cursor:pointer;transition:all .2s;font-family:'Share Tech Mono',monospace;
}
.quiz-option:hover{
  border-color:var(--neon-cyan);background:rgba(0,240,255,.06);color:#fff
}
.quiz-option.correct{
  border-color:var(--neon-green);background:rgba(57,255,20,.1);
  color:var(--neon-green)
}
.quiz-option.wrong{
  border-color:var(--neon-pink);background:rgba(255,45,149,.1);
  color:var(--neon-pink)
}
.quiz-option.disabled{pointer-events:none}
.quiz-result{
  margin-top:12px;text-align:center;font-family:'Orbitron',sans-serif;
  font-size:.6rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;
  color:var(--neon-green);opacity:0;transition:opacity .3s
}
.quiz-result.show{opacity:1}
.quiz-result.wrong-result{color:var(--neon-pink)}

/* Modal Styles for Home Confirmation */
.modal-overlay{
  position:fixed;inset:0;z-index:200;
  background:rgba(5,5,15,.88);backdrop-filter:blur(6px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:opacity .28s
}
.modal-overlay.active{opacity:1;pointer-events:auto}
.home-modal{
  background:#111128;border:1px solid rgba(0,240,255,.28);
  border-radius:16px;width:360px;max-width:92vw;padding:32px 28px 26px;
  box-shadow:0 0 50px rgba(0,240,255,.1),0 12px 50px rgba(0,0,0,.5);
  animation:modalPop .24s cubic-bezier(.18,.89,.32,1.28) both;
  position:relative;text-align:center
}
@keyframes modalPop{
  from{transform:scale(.88) translateY(20px);opacity:0}
  to{transform:scale(1) translateY(0);opacity:1}
}
.home-modal .modal-title{
  font-family:'Orbitron',sans-serif;font-size:1rem;font-weight:900;
  color:var(--neon-cyan);letter-spacing:4px;text-transform:uppercase;
  text-shadow:0 0 10px var(--neon-cyan);margin-bottom:16px
}
.home-modal .modal-actions{
  display:flex;gap:12px;justify-content:center;margin-top:24px
}
.home-modal .nav-btn{
  min-width:auto;padding:12px 24px;font-size:.68rem;letter-spacing:3px;
  font-family:'Orbitron',sans-serif;border-radius:30px;cursor:pointer;
  text-transform:uppercase;transition:all .3s;
  background:transparent;border:1px solid rgba(0,240,255,.25);color:var(--neon-cyan)
}
.home-modal .nav-btn:hover{
  border-color:var(--neon-cyan);
  box-shadow:0 0 24px rgba(0,240,255,.35),inset 0 0 24px rgba(0,240,255,.06);
  color:#fff
}
.home-modal .nav-btn.red{
  border-color:rgba(255,0,64,.25);color:var(--neon-red)
}
.home-modal .nav-btn.red:hover{
  border-color:var(--neon-red);
  box-shadow:0 0 24px rgba(255,0,64,.35),inset 0 0 24px rgba(255,0,64,.06);
  color:#fff
}

.board-wrap.flash{animation:boardFlash .3s}
@keyframes boardFlash{
  0%{box-shadow:0 0 30px rgba(0,240,255,.08),0 0 60px rgba(0,240,255,.3)}
  50%{box-shadow:0 0 50px rgba(0,240,255,.5),0 0 100px rgba(0,240,255,.4)}
  100%{box-shadow:0 0 30px rgba(0,240,255,.08)}
}

.score-pop{
  position:absolute;top:8px;right:8px;font-family:'Orbitron',sans-serif;
  font-size:.65rem;font-weight:700;color:var(--neon-green);
  text-shadow:0 0 8px var(--neon-green);pointer-events:none;z-index:5;
  animation:scorePop 1s forwards
}
@keyframes scorePop{
  0%{opacity:1;transform:translateY(0)}
  100%{opacity:0;transform:translateY(-28px)}
}